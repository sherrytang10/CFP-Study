---
name: save-session
description: 将当前对话中的阅读讨论保存为 session notes 并更新进度追踪
disable-model-invocation: true
allowed-tools: Read, Write, Edit, Glob, Bash
argument-hint: "[书名（可选）]"
---

## 任务：保存当前学习会话

执行 CLAUDE.md 中定义的两步记录协议，将本次对话中的阅读讨论记录下来。

### Step 1：保存会话详情

1. **确定书名**
   - 如果用户指定了（$ARGUMENTS），使用该书名
   - 否则根据对话内容判断讨论的是哪本书

2. **创建会话文件**
   - 路径：`books/[book-name]/sessions/YYYY-MM-DD/session-notes.md`
   - 如果今天已有文件，追加内容而非覆盖
   - 参考模板：`templates/SESSION-TEMPLATE.md`

3. **记录内容**（从当前对话中提取）
   - 会话概览（日期、书籍、讨论章节）
   - 读者的初始理解和提出的问题
   - 讨论的核心概念和教学方式
   - 理解力检测的问答记录
   - **尚未掌握的概念**（读者卡住的地方）
   - **已掌握的概念**（附信心度评估）
   - 批判性思考的亮点
   - 跨书连接（如有）
   - 关键收获
   - 下次讨论计划

### Step 2：更新进度追踪

1. **读取当前进度**
   - 读取 `books/[book-name]/reading-progress.md`

2. **更新以下部分**
   - **章节进度表**：更新讨论过的章节状态和理解程度
   - **已掌握概念**：添加新掌握的概念（附日期、信心度、要点）
   - **待复习概念**：
     - 新增：本次讨论中发现的薄弱点
     - 更新：之前的概念如有进步则调整状态
     - 解决：已掌握的概念标记为已解决
   - **复习记录表**：添加本次会话记录
   - **概览统计**：更新会话数、最后更新日期
   - **跨书连接**：如有新发现则添加

3. **输出确认**
   - 展示保存的文件路径
   - 简要列出更新的内容

### 语言要求

- 所有记录以中文为主
